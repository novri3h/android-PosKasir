!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.sortable=b(a.jQuery)}(this,function(a){"use strict";var b,c,d=a(),e=[],f=function(a){a.off("dragstart.h5s"),a.off("dragend.h5s"),a.off("selectstart.h5s"),a.off("dragover.h5s"),a.off("dragenter.h5s"),a.off("drop.h5s")},g=function(a){a.off("dragover.h5s"),a.off("dragenter.h5s"),a.off("drop.h5s")},h=function(a,b){a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text",""),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(b.item,b.x,b.y)},i=function(a,b){return b.x||(b.x=parseInt(a.pageX-b.draggedItem.offset().left)),b.y||(b.y=parseInt(a.pageY-b.draggedItem.offset().top)),b},j=function(a){return{item:a[0],draggedItem:a}},k=function(a,b){var c=j(b);c=i(a,c),h(a,c)},l=function(a,b){return"undefined"==typeof a?b:a},m=function(a){a.removeData("opts"),a.removeData("connectWith"),a.removeData("items"),a.removeAttr("aria-dropeffect")},n=function(a){a.removeAttr("aria-grabbed"),a.removeAttr("draggable"),a.removeAttr("role")},o=function(a,b){return a[0]===b[0]?!0:void 0!==a.data("connectWith")?a.data("connectWith")===b.data("connectWith"):!1},p=function(a){var b=a.data("opts")||{},c=a.children(b.items),d=b.handle?c.find(b.handle):c;g(a),m(a),d.off("mousedown.h5s"),f(c),n(c)},q=function(b){var c=b.data("opts"),d=b.children(c.items),e=c.handle?d.find(c.handle):d;b.attr("aria-dropeffect","move"),e.attr("draggable","true");var f=(document||window.document).createElement("span");"function"!=typeof f.dragDrop||c.disableIEFix||e.on("mousedown.h5s",function(){-1!==d.index(this)?this.dragDrop():a(this).parents(c.items)[0].dragDrop()})},r=function(a){var b=a.data("opts"),c=a.children(b.items),d=b.handle?c.find(b.handle):c;a.attr("aria-dropeffect","none"),d.attr("draggable",!1),d.off("mousedown.h5s")},s=function(a){var b=a.data("opts"),c=a.children(b.items),d=b.handle?c.find(b.handle):c;f(c),d.off("mousedown.h5s"),g(a)},t=function(f,g){var i=a(f),j=String(g);return g=a.extend({connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1},g),i.each(function(){var f=a(this);if(/enable|disable|destroy/.test(j))return void t[j](f);g=l(f.data("opts"),g),f.data("opts",g),s(f);var i,m,n,p=f.children(g.items),r=null===g.placeholder?a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="'+g.placeholderClass+'"/>'):a(g.placeholder).addClass(g.placeholderClass);if(!f.attr("data-sortable-id")){var u=e.length;e[u]=f,f.attr("data-sortable-id",u),p.attr("data-item-sortable-id",u)}if(f.data("items",g.items),d=d.add(r),g.connectWith&&f.data("connectWith",g.connectWith),q(f),p.attr("role","option"),p.attr("aria-grabbed","false"),g.hoverClass){var v="sortable-over";"string"==typeof g.hoverClass&&(v=g.hoverClass),p.hover(function(){a(this).addClass(v)},function(){a(this).removeClass(v)})}p.on("dragstart.h5s",function(d){d.stopImmediatePropagation(),g.dragImage?(h(d.originalEvent,{item:g.dragImage,x:0,y:0}),console.log("WARNING: dragImage option is deprecated and will be removed in the future!")):k(d.originalEvent,a(this),g.dragImage),b=a(this),b.addClass(g.draggingClass),b.attr("aria-grabbed","true"),i=b.index(),c=b.height(),m=a(this).parent(),b.parent().triggerHandler("sortstart",{item:b,placeholder:r,startparent:m})}),p.on("dragend.h5s",function(){b&&(b.removeClass(g.draggingClass),b.attr("aria-grabbed","false"),b.show(),d.detach(),n=a(this).parent(),b.parent().triggerHandler("sortstop",{item:b,startparent:m}),(i!==b.index()||m.get(0)!==n.get(0))&&b.parent().triggerHandler("sortupdate",{item:b,index:n.children(n.data("items")).index(b),oldindex:p.index(b),elementIndex:b.index(),oldElementIndex:i,startparent:m,endparent:n}),b=null,c=null)}),a(this).add([r]).on("drop.h5s",function(c){return o(f,a(b).parent())?(c.stopPropagation(),d.filter(":visible").after(b),b.trigger("dragend.h5s"),!1):void 0}),p.add([this]).on("dragover.h5s dragenter.h5s",function(e){if(o(f,a(b).parent())){if(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",p.is(this)){var h=a(this).height();if(g.forcePlaceholderSize&&r.height(c),h>c){var i=h-c,j=a(this).offset().top;if(r.index()<a(this).index()&&e.originalEvent.pageY<j+i)return!1;if(r.index()>a(this).index()&&e.originalEvent.pageY>j+h-i)return!1}b.hide(),r.index()<a(this).index()?a(this).after(r):a(this).before(r),d.not(r).detach()}else d.is(this)||a(this).children(g.items).length||(d.detach(),a(this).append(r));return!1}})})};return t.destroy=function(a){p(a)},t.enable=function(a){q(a)},t.disable=function(a){r(a)},a.fn.sortable=function(a){return t(this,a)},t});