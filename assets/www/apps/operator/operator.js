!function(){"use strict";function a(a,b,c){function d(){t.operatorLoading=!0,$.ajax({context:b,type:"GET",url:s+"operator_list/",dataType:"json",data:{last_count:t.operators.length},success:function(a){a.operators&&(a.operators.forEach(function(a){if(t.operators.length){var b=_.findIndex(t.operators,function(b){return b.operator_uxid==a.operator_uxid});-1===b?t.operators.push(a):t.operators[b]=a}else t.operators.push(a)}),g()),t.operators.length?t.operatorEmpty=!1:t.operatorEmpty=!0,t.$apply()},complete:function(){t.operatorLoading=!1,t.$apply()},error:function(){t.operatorLoading=!1,t.$apply()}})}function e(){t.operatorLoading=!0,$.ajax({context:b,type:"GET",url:s+"operator_search/",dataType:"json",data:{last_count:t.operators.length,search:t.operatorSearch},success:function(a){a.operators&&(a.operators.forEach(function(a){if(t.operators.length){var b=_.findIndex(t.operators,function(b){return b.operator_uxid==a.operator_uxid});-1===b?t.operators.push(a):t.operators[b]=a}else t.operators.push(a)}),g()),t.operators.length?t.operatorEmpty=!1:t.operatorEmpty=!0,t.$apply()},complete:function(){t.operatorLoading=!1,t.$apply()},error:function(){t.operatorLoading=!1,t.$apply()}})}function f(){var a=!1;return angular.forEach(t.operators,function(b){b.operator_username==t.operatorSelectedUsername&&(t.operator=b,t.operator.selected=!0,a=!0,t.operatorSelectedUsername=""),b.selected&&(a=!0)}),a}function g(){0==f()&&t.operators.length&&h(t.operators[0])}function h(a){angular.forEach(t.operators,function(a){a.selected=!1}),t.operator=a,t.operator.selected=!0}function i(){t.operatorEmpty=!1,t.operatorSearch.length?(t.operators=[],e()):(t.operators=[],d())}function j(){t.operatorEmpty=!1,t.operatorSearch.length?e():d()}function k(){t.operatorFormNew=!0}function l(){t.operatorCreateLoading=!0,$.ajax({context:b,type:"POST",url:s+"operator_save/",dataType:"json",data:t.operatorObjNew,success:function(a){t.operatorSelectedUsername=t.operatorObjNew.operator_username,a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),t.$apply()),a.status&&"OK"==a.status&&(t.operatorObjNew.operator_uxid="",t.operatorObjNew.operator_username="",t.operatorObjNew.operator_password="",t.operatorObjNew.operator_realname="",t.operatorObjNew.operator_rights_sell="1",t.operatorObjNew.operator_rights_rsell="0",t.operatorObjNew.operator_rights_buy="0",t.operatorObjNew.operator_rights_rbuy="0",t.operatorObjNew.operator_rights_cashin="0",t.operatorObjNew.operator_rights_cashout="0",t.operatorObjNew.operator_rights_product="0",t.operatorObjNew.operator_rights_stock="0",t.operatorObjNew.operator_rights_customer="0",t.operatorObjNew.operator_rights_supplier="0",t.operatorObjNew.operator_rights_edit="0",t.operatorObjNew.operator_rights_delete="0",t.operatorObjNew.operator_rights_hutang="0",t.operatorObjNew.operator_rights_piutang="0",t.operatorObjNew.operator_rights_cashflow="0",t.operatorObjNew.operator_rights_report="0",t.operatorObjNew.operator_rights_sell_price_edit="0",t.operatorObjNew.operator_rights_date_edit="0",t.operatorObjNew.operator_rights_discount="0",t.operatorObjNew.operator_rights_price_level="0",i(),t.operatorFormNew=!1,t.$apply())},complete:function(){t.operatorCreateLoading=!1,t.$apply()},error:function(){t.operatorCreateLoading=!1,t.$apply()}})}function m(a){t.operatorObjEdit.operator_uxid=a.operator_uxid,t.operatorObjEdit.operator_username=a.operator_username,t.operatorObjEdit.operator_password=a.operator_password,t.operatorObjEdit.operator_realname=a.operator_realname,t.operatorObjEdit.operator_rights_sell=a.operator_rights_sell,t.operatorObjEdit.operator_rights_rsell=a.operator_rights_rsell,t.operatorObjEdit.operator_rights_buy=a.operator_rights_buy,t.operatorObjEdit.operator_rights_rbuy=a.operator_rights_rbuy,t.operatorObjEdit.operator_rights_cashin=a.operator_rights_cashin,t.operatorObjEdit.operator_rights_cashout=a.operator_rights_cashout,t.operatorObjEdit.operator_rights_product=a.operator_rights_product,t.operatorObjEdit.operator_rights_stock=a.operator_rights_stock,t.operatorObjEdit.operator_rights_customer=a.operator_rights_customer,t.operatorObjEdit.operator_rights_supplier=a.operator_rights_supplier,t.operatorObjEdit.operator_rights_edit=a.operator_rights_edit,t.operatorObjEdit.operator_rights_delete=a.operator_rights_delete,t.operatorObjEdit.operator_rights_hutang=a.operator_rights_hutang,t.operatorObjEdit.operator_rights_piutang=a.operator_rights_piutang,t.operatorObjEdit.operator_rights_cashflow=a.operator_rights_cashflow,t.operatorObjEdit.operator_rights_report=a.operator_rights_report,t.operatorObjEdit.operator_rights_sell_price_edit=a.operator_rights_sell_price_edit,t.operatorObjEdit.operator_rights_date_edit=a.operator_rights_date_edit,t.operatorObjEdit.operator_rights_discount=a.operator_rights_discount,t.operatorObjEdit.operator_rights_price_level=a.operator_rights_price_level,t.operatorFormEdit=!0}function n(){t.operatorEditLoading=!0,$.ajax({context:b,type:"POST",url:s+"operator_update/",dataType:"json",data:t.operatorObjEdit,success:function(a){t.operatorSelectedUsername=t.operatorObjEdit.operator_username,a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),t.$apply()),a.status&&"OK"==a.status&&(t.operatorObjEdit.operator_uxid="",t.operatorObjEdit.operator_username="",t.operatorObjEdit.operator_password="",t.operatorObjEdit.operator_realname="",t.operatorObjEdit.operator_rights_sell="0",t.operatorObjEdit.operator_rights_rsell="0",t.operatorObjEdit.operator_rights_buy="0",t.operatorObjEdit.operator_rights_rbuy="0",t.operatorObjEdit.operator_rights_cashin="0",t.operatorObjEdit.operator_rights_cashout="0",t.operatorObjEdit.operator_rights_product="0",t.operatorObjEdit.operator_rights_stock="0",t.operatorObjEdit.operator_rights_customer="0",t.operatorObjEdit.operator_rights_supplier="0",t.operatorObjEdit.operator_rights_edit="0",t.operatorObjEdit.operator_rights_delete="0",t.operatorObjEdit.operator_rights_hutang="0",t.operatorObjEdit.operator_rights_piutang="0",t.operatorObjEdit.operator_rights_cashflow="0",t.operatorObjEdit.operator_rights_report="0",t.operatorObjEdit.operator_rights_sell_price_edit="0",t.operatorObjEdit.operator_rights_date_edit="0",t.operatorObjEdit.operator_rights_discount="0",t.operatorObjEdit.operator_rights_price_level="0",i(),t.operatorFormEdit=!1,t.$apply())},complete:function(){t.operatorEditLoading=!1,t.$apply()},error:function(){t.operatorEditLoading=!1,t.$apply()}})}function o(a){t.operatorObjEdit.operator_uxid=a.operator_uxid,t.operatorObjEdit.operator_username=a.operator_username,t.operatorObjEdit.operator_password=a.operator_password,t.operatorFormEditPassword=!0}function p(){t.operatorEditLoading=!0,$.ajax({context:b,type:"POST",url:s+"operator_update_password/",dataType:"json",data:t.operatorObjEdit,success:function(a){t.operatorSelectedUsername=t.operatorObjEdit.operator_username,a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),t.$apply()),a.status&&"OK"==a.status&&(t.operatorObjEdit.operator_uxid="",t.operatorObjEdit.operator_username="",t.operatorObjEdit.operator_password="",t.operatorObjEdit.operator_realname="",t.operatorObjEdit.operator_rights_sell="0",t.operatorObjEdit.operator_rights_rsell="0",t.operatorObjEdit.operator_rights_buy="0",t.operatorObjEdit.operator_rights_rbuy="0",t.operatorObjEdit.operator_rights_cashin="0",t.operatorObjEdit.operator_rights_cashout="0",t.operatorObjEdit.operator_rights_product="0",t.operatorObjEdit.operator_rights_stock="0",t.operatorObjEdit.operator_rights_customer="0",t.operatorObjEdit.operator_rights_supplier="0",t.operatorObjEdit.operator_rights_edit="0",t.operatorObjEdit.operator_rights_delete="0",t.operatorObjEdit.operator_rights_hutang="0",t.operatorObjEdit.operator_rights_piutang="0",t.operatorObjEdit.operator_rights_cashflow="0",t.operatorObjEdit.operator_rights_report="0",t.operatorObjEdit.operator_rights_sell_price_edit="0",t.operatorObjEdit.operator_rights_date_edit="0",t.operatorObjEdit.operator_rights_discount="0",t.operatorObjEdit.operator_rights_price_level="0",i(),t.operatorFormEditPassword=!1,t.$apply())},complete:function(){t.operatorEditLoading=!1,t.$apply()},error:function(){t.operatorEditLoading=!1,t.$apply()}})}function q(a){t.operatorDeleteConfirm=!0,t.operatorObjDelete.operator_uxid=a.operator_uxid,t.operatorObjDelete.operator_realname=a.operator_realname,t.operatorObjDelete.operator_username=a.operator_username}function r(){t.operatorDeleteLoading=!0,$.ajax({context:b,type:"GET",url:s+"operator_delete/",dataType:"json",data:t.operatorObjDelete,success:function(a){a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),t.$apply()),a.status&&"OK"==a.status&&(t.operators=_.reject(t.operators,function(a){return a.operator_uxid==t.operatorObjDelete.operator_uxid}),g(),t.operatorDeleteConfirm=!1,t.operators.length?t.operatorEmpty=!1:t.operatorEmpty=!0,t.$apply())},complete:function(){t.operatorDeleteLoading=!1,t.$apply()},error:function(){t.operatorDeleteLoading=!1,t.$apply()}})}var s=a.api.url_operator,t=b;t.windowHeight=function(){var a=$(window).height(),b=a/4,c=a-b;return c-80},t.operatorEmpty=!1,t.operatorLoading=!1,t.operators=[],d(),t.operatorList=d,t.operatorSelectedUsername="",t.operatorSelect=h,t.operatorSearch="",t.operatorListLoad=i,t.operatorListMoreCall=function(){j()},t.operatorObjNew={operator_uxid:"",operator_username:"",operator_password:"",operator_realname:"",operator_rights_sell:"1",operator_rights_rsell:"0",operator_rights_buy:"0",operator_rights_rbuy:"0",operator_rights_cashin:"0",operator_rights_cashout:"0",operator_rights_product:"0",operator_rights_stock:"0",operator_rights_customer:"0",operator_rights_supplier:"0",operator_rights_edit:"0",operator_rights_delete:"0",operator_rights_hutang:"0",operator_rights_piutang:"0",operator_rights_cashflow:"0",operator_rights_report:"0",operator_rights_sell_price_edit:"0",operator_rights_date_edit:"0",operator_rights_discount:"0",operator_rights_price_level:"0"},t.operatorFormNew=!1,t.operatorCreate=k,t.operatorCreateLoading=!1,t.operatorCreateSave=l,t.operatorObjEdit={operator_uxid:"",operator_username:"",operator_password:"",operator_realname:"",operator_rights_sell:"0",operator_rights_rsell:"0",operator_rights_buy:"0",operator_rights_rbuy:"0",operator_rights_cashin:"0",operator_rights_cashout:"0",operator_rights_product:"0",operator_rights_stock:"0",operator_rights_customer:"0",operator_rights_supplier:"0",operator_rights_edit:"0",operator_rights_delete:"0",operator_rights_hutang:"0",operator_rights_piutang:"0",operator_rights_cashflow:"0",operator_rights_report:"0",operator_rights_sell_price_edit:"0",operator_rights_date_edit:"0",operator_rights_discount:"0",operator_rights_price_level:"0"},t.operatorFormEdit=!1,t.operatorEdit=m,t.operatorEditLoading=!1,t.operatorEditSave=n,t.operatorFormEditPassword=!1,t.operatorEditPassword=o,t.operatorEditPasswordSave=p,t.operatorObjDelete={operator_uxid:"",operator_username:"",operator_realname:""},t.operatorDeleteConfirm=!1,t.operatorDelete=q,t.operatorDeleteLoading=!1,t.operatorDeleteYes=r}angular.module("app").controller("OperatorCtrl",a),a.$inject=["$rootScope","$scope","toaster"]}();