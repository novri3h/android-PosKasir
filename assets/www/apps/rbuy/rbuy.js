!function(){"use strict";function a(a,b,c,d){function e(a){var b=".",c=",",d="";a+="",a=a.replace(new RegExp(",","g"),"");for(var e=a.split(b),f=e[0].split("").reverse(),g=Array(),h=0;h<f.length;h++)g[g.length]=h%3===2&&h<f.length-1?c+f[h]:f[h];var i=g.reverse().join("");return a.indexOf(b)>=0&&parseInt(e[1])&&(i+=b+e[1]),d=i}function f(a){var b="0";a+="",a=a.replace(new RegExp(" ","g"),"");var c=a.split(".");if(c.length>1){var d=c[0].replace(new RegExp(",","g"),""),e=c[1].replace(new RegExp(",","g"),"");b=parseInt(e)?d+"."+e:d}else b=a.replace(new RegExp(",","g"),"");return b.length<1&&(b="0"),b}function g(a){var b="";a+="",a=a.replace(new RegExp(" ","g"),"");var c=a.split(".");if(c.length>1){var d=c[0],e=c[1].replace(new RegExp(",","g"),"");b=parseInt(e)?d+"."+e:d}else b=a;return b}function h(a){var b="";a+="",a=a.replace(new RegExp(" ","g"),"");var c=a.split(".");if(c.length>1){var d=c[0];b=d}else b=a;return b}function i(){Y.categoryLoading=!0,$.ajax({context:b,type:"GET",url:Z+"category_list/",dataType:"json",data:{last_count:Y.categorys.length},success:function(a){Y.categoryLoading=!1,a.categorys&&a.categorys.forEach(function(a){if(Y.categorys.length){var b=_.findIndex(Y.categorys,function(b){return b.category_uxid==a.category_uxid});-1===b?Y.categorys.push(a):Y.categorys[b]=a}else Y.categorys.push(a)}),Y.$apply()},complete:function(){Y.categoryLoading=!1,Y.$apply()},error:function(){Y.categoryLoading=!1,Y.$apply()}})}function j(a){angular.forEach(Y.categorys,function(a){a.selected=!1}),Y.category=a,Y.category.selected=!0,Y.productSearch="",Y.categoryNameSelected=a.category_name}function k(){Y.productSearch="",""==Y.categoryNameSelected?l():Y.categoryNameSelected=""}function l(){Y.productEmpty=!1,(void 0!==Y.categoryNameSelected||null!==Y.categoryNameSelected)&&(Y.categoryNameSelected.length?Y.productSearch.length?(Y.products=[],q()):(Y.products=[],o()):Y.productSearch.length?(Y.products=[],p(),angular.forEach(Y.categorys,function(a){a.selected=!1})):(Y.products=[],n(),angular.forEach(Y.categorys,function(a){a.selected=!1})))}function m(){Y.productEmpty=!1,(void 0!==Y.categoryNameSelected||null!==Y.categoryNameSelected)&&(Y.categoryNameSelected.length?Y.productSearch.length?q():o():Y.productSearch.length?(p(),angular.forEach(Y.categorys,function(a){a.selected=!1})):(n(),angular.forEach(Y.categorys,function(a){a.selected=!1})))}function n(){Y.productLoading=!0,$.ajax({context:b,type:"GET",url:Z+"product_buy_list/",dataType:"json",data:{last_count:Y.products.length},success:function(a){Y.productLoading=!1,a.products&&a.products.forEach(function(a){if(Y.products.length){var b=_.findIndex(Y.products,function(b){return b.product_uxid==a.product_uxid});-1===b?Y.products.push(a):Y.products[b]=a}else Y.products.push(a)}),Y.products.length?Y.productEmpty=!1:Y.productEmpty=!0,Y.$apply()},complete:function(){Y.productLoading=!1,Y.$apply()},error:function(){Y.productLoading=!1,Y.$apply()}})}function o(){Y.productLoading=!0,$.ajax({context:b,type:"GET",url:Z+"product_buy_list/",dataType:"json",data:{last_count:Y.products.length,category_name:Y.categoryNameSelected},success:function(a){Y.productLoading=!1,a.products&&a.products.forEach(function(a){if(Y.products.length){var b=_.findIndex(Y.products,function(b){return b.product_uxid==a.product_uxid});-1===b?Y.products.push(a):Y.products[b]=a}else Y.products.push(a)}),Y.products.length?Y.productEmpty=!1:Y.productEmpty=!0,Y.$apply()},complete:function(){Y.productLoading=!1,Y.$apply()},error:function(){Y.productLoading=!1,Y.$apply()}})}function p(){Y.productLoading=!0,$.ajax({context:b,type:"GET",url:Z+"product_buy_search/",dataType:"json",data:{last_count:Y.products.length,search:Y.productSearch},success:function(a){Y.productLoading=!1,a.products&&a.products.forEach(function(a){if(Y.products.length){var b=_.findIndex(Y.products,function(b){return b.product_uxid==a.product_uxid});-1===b?Y.products.push(a):Y.products[b]=a}else Y.products.push(a)}),Y.products.length?Y.productEmpty=!1:Y.productEmpty=!0,Y.$apply()},complete:function(){Y.productLoading=!1,Y.$apply()},error:function(){Y.productLoading=!1,Y.$apply()}})}function q(){Y.productLoading=!0,$.ajax({context:b,type:"GET",url:Z+"product_buy_search/",dataType:"json",data:{last_count:Y.products.length,category_name:Y.categoryNameSelected,search:Y.productSearch},success:function(a){Y.productLoading=!1,a.products&&a.products.forEach(function(a){if(Y.products.length){var b=_.findIndex(Y.products,function(b){return b.product_uxid==a.product_uxid});-1===b?Y.products.push(a):Y.products[b]=a}else Y.products.push(a)}),Y.products.length?Y.productEmpty=!1:Y.productEmpty=!0,Y.$apply()},complete:function(){Y.productLoading=!1,Y.$apply()},error:function(){Y.productLoading=!1,Y.$apply()}})}function r(a){angular.forEach(Y.products,function(a){a.selected=!1}),Y.product=a,Y.product.selected=!0}function s(){Y.supplierLoading=!0,$.ajax({context:b,type:"GET",url:ba+"supplier_list/",dataType:"json",data:{last_count:Y.suppliers.length},success:function(a){a.suppliers&&(a.suppliers.forEach(function(a){if(Y.suppliers.length){var b=_.findIndex(Y.suppliers,function(b){return b.supplier_uxid==a.supplier_uxid});-1===b?Y.suppliers.push(a):Y.suppliers[b]=a}else Y.suppliers.push(a)}),v()),Y.suppliers.length?Y.supplierEmpty=!1:Y.supplierEmpty=!0,Y.$apply()},complete:function(){Y.supplierLoading=!1,Y.$apply()},error:function(){Y.supplierLoading=!1,Y.$apply()}})}function t(){Y.supplierLoading=!0,$.ajax({context:b,type:"GET",url:ba+"supplier_search/",dataType:"json",data:{last_count:Y.suppliers.length,search:Y.supplierSearch},success:function(a){a.suppliers&&(a.suppliers.forEach(function(a){if(Y.suppliers.length){var b=_.findIndex(Y.suppliers,function(b){return b.supplier_uxid==a.supplier_uxid});-1===b?Y.suppliers.push(a):Y.suppliers[b]=a}else Y.suppliers.push(a)}),v()),Y.suppliers.length?Y.supplierEmpty=!1:Y.supplierEmpty=!0,Y.$apply()},complete:function(){Y.supplierLoading=!1,Y.$apply()},error:function(){Y.supplierLoading=!1,Y.$apply()}})}function u(){var a=!1;return angular.forEach(Y.suppliers,function(b){b.selected&&(a=!0)}),a}function v(){0==u()&&Y.suppliers.length&&y(Y.suppliers[0])}function w(){Y.supplierEmpty=!1,Y.supplierSearch.length?(Y.suppliers=[],t()):(Y.suppliers=[],s())}function x(){Y.supplierEmpty=!1,Y.supplierSearch.length?t():s()}function y(a){angular.forEach(Y.suppliers,function(a){a.selected=!1}),Y.supplier=a,Y.supplier.selected=!0}function z(a){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"supplier_set/",dataType:"json",data:a,success:function(a){Y.supplierSelectForm=!1,Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function A(){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"supplier_clear/",dataType:"json",success:function(a){Y.supplierSelectForm=!1,Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function B(){Y.supplierFormNew=!0}function C(){Y.supplierCreateLoading=!0,$.ajax({context:b,type:"POST",url:ba+"supplier_save/",dataType:"json",data:Y.supplierObjNew,success:function(a){a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),Y.$apply()),a.status&&"OK"==a.status&&(Y.supplierObjNew.supplier_uxid="",Y.supplierObjNew.supplier_realname="",Y.supplierObjNew.supplier_code="",Y.supplierObjNew.supplier_email="",Y.supplierObjNew.supplier_company="",Y.supplierObjNew.supplier_phone="",Y.supplierObjNew.supplier_address1="",Y.supplierObjNew.supplier_address2="",Y.supplierObjNew.supplier_address3="",Y.supplierObjNew.supplier_address4="",Y.supplierObjNew.supplier_address5="",w(),Y.supplierFormNew=!1,Y.$apply())},complete:function(){Y.supplierCreateLoading=!1,Y.$apply()},error:function(){Y.supplierCreateLoading=!1,Y.$apply()}})}function D(a){Y.supplierObjEdit.supplier_uxid=a.supplier_uxid,Y.supplierObjEdit.supplier_realname=a.supplier_realname,Y.supplierObjEdit.supplier_code=a.supplier_code,Y.supplierObjEdit.supplier_email=a.supplier_email,Y.supplierObjEdit.supplier_company=a.supplier_company,Y.supplierObjEdit.supplier_phone=a.supplier_phone,Y.supplierObjEdit.supplier_address1=a.supplier_address1,Y.supplierObjEdit.supplier_address2=a.supplier_address2,Y.supplierObjEdit.supplier_address3=a.supplier_address3,Y.supplierObjEdit.supplier_address4=a.supplier_address4,Y.supplierObjEdit.supplier_address5=a.supplier_address5,Y.supplierFormEdit=!0}function E(){Y.supplierEditLoading=!0,$.ajax({context:b,type:"POST",url:ba+"supplier_update/",dataType:"json",data:Y.supplierObjEdit,success:function(a){a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),Y.$apply()),a.status&&"OK"==a.status&&(Y.supplierObjEdit.supplier_uxid="",Y.supplierObjEdit.supplier_realname="",Y.supplierObjEdit.supplier_code="",Y.supplierObjEdit.supplier_email="",Y.supplierObjEdit.supplier_company="",Y.supplierObjEdit.supplier_phone="",Y.supplierObjEdit.supplier_address1="",Y.supplierObjEdit.supplier_address2="",Y.supplierObjEdit.supplier_address3="",Y.supplierObjEdit.supplier_address4="",Y.supplierObjEdit.supplier_address5="",w(),Y.supplierFormEdit=!1,Y.$apply())},complete:function(){Y.supplierEditLoading=!1,Y.$apply()},error:function(){Y.supplierEditLoading=!1,Y.$apply()}})}function F(){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"transaction_load/",dataType:"json",success:function(a){Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function G(a){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"transaction_open/",dataType:"json",data:{transaction_uxid:a.transaction_uxid},success:function(a){Y.transactionDraftForm=!1,Y.transactionOkForm=!1,Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function H(a){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"transaction_open/",dataType:"json",data:{transaction_uxid:a},success:function(a){Y.transactionDraftForm=!1,Y.transactionOkForm=!1,Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function I(a){Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"cart_add_product/",dataType:"json",data:a,success:function(b){if(Y.transactionLoading=!1,b.transaction&&(Y.transaction=b.transaction),b.carts&&(Y.carts=b.carts),b.carts){var c=_.findIndex(Y.carts,function(b){return b.cart_product_uxid==a.product_uxid});c>=0&&K(Y.carts[c])}Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function J(){Y.barcodeTx.length&&(Y.transactionLoading=!0,$.ajax({context:b,type:"GET",url:ca+"cart_add_barcode/",dataType:"json",data:{product_code:Y.barcodeTx},success:function(a){if(Y.transactionLoading=!1,a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),Y.$apply()),a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),a.carts){var b=_.findIndex(Y.carts,function(a){return a.cart_product_code.toUpperCase()==Y.barcodeTx.toUpperCase()});b>=0&&K(Y.carts[b])}Y.barcodeTx="",Y.$apply()},complete:function(){Y.barcodeTx="",Y.transactionLoading=!1,Y.$apply()},error:function(){Y.barcodeTx="",Y.transactionLoading=!1,Y.$apply()}}))}function K(a){Y.cartEditObj.cart_uxid=a.cart_uxid,Y.cartEditObj.cart_product_name=a.cart_product_name,Y.cartEditObj.cart_product_code=a.cart_product_code,Y.cartEditObj.cart_product_unit=a.cart_product_unit,Y.cartEditObj.cart_product_base_price=e(a.cart_product_base_price),Y.cartEditObj.cart_amount=e(a.cart_amount),Y.cartEditObj.cart_base_value=e(a.cart_base_value),Y.cartEditObj.cart_note=a.cart_note,Y.cartEditForm=!0}function L(){Y.cartEditObj.cart_product_base_price=h(Y.cartEditObj.cart_product_base_price),Y.cartEditLoading=!0,$.ajax({context:b,type:"POST",url:ca+"cart_update/",dataType:"json",data:Y.cartEditObj,success:function(a){Y.cartEditForm=!1,Y.cartEditLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),$("#txBarcode").focus(),Y.$apply()},complete:function(){Y.cartEditLoading=!1,Y.$apply()},error:function(){Y.cartEditLoading=!1,Y.$apply()}})}function M(a){Y.cartDeleteConfirm=!0,Y.cartObjDelete.cart_uxid=a.cart_uxid,Y.cartObjDelete.cart_product_name=a.cart_product_name}function N(){Y.cartDeleteLoading=!0,$.ajax({context:b,type:"GET",url:ca+"cart_delete/",dataType:"json",data:Y.cartObjDelete,success:function(a){Y.cartDeleteConfirm=!1,Y.cartDeleteLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.cartDeleteLoading=!1,Y.$apply()},error:function(){Y.cartDeleteLoading=!1,Y.$apply()}})}function O(){return Y.transaction.transaction_total<=0?void c.pop("info","Info","Belum ada daftar belanja"):(Y.payTunaiObj.cash_date_start=Y.transaction.transaction_date,Y.payTunaiObj.cash_total=Y.transaction.transaction_total,Y.payTunaiObj.cash_pay=e(Y.transaction.transaction_total),Y.transactionLoading=!0,void $.ajax({context:b,type:"GET",url:da+"cashbox_list/",dataType:"json",success:function(a){Y.transactionLoading=!1,a.cashboxs&&(a.cashboxs.forEach(function(a){if(Y.cashboxs.length){var b=_.findIndex(Y.cashboxs,function(b){return b.cashbox_uxid==a.cashbox_uxid});-1===b?Y.cashboxs.push(a):Y.cashboxs[b]=a}else Y.cashboxs.push(a)}),Y.payTunaiForm=!0,Y.optionCashboxSelected=Y.cashboxs[0]),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}}))}function P(){Y.payTunaiLoading=!0,Y.payTunaiObj.cash_cashbox_uxid=Y.optionCashboxSelected.cashbox_uxid,Y.payTunaiObj.cash_cashbox_name=Y.optionCashboxSelected.cashbox_name,$.ajax({context:b,type:"POST",url:ca+"pay_tunai_save/",dataType:"json",data:Y.payTunaiObj,success:function(a){a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),Y.$apply()),a.transaction&&(Y.payTunaiObj.cash_total="",Y.payTunaiObj.cash_pay="",Y.payTunaiObj.cash_cashbox_uxid="",Y.payTunaiObj.cash_cashbox_name="",Y.payTunaiForm=!1,Y.payTunaiLoading=!1,Y.transaction=a.transaction,X()),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.payTunaiLoading=!1,Y.$apply()},error:function(){Y.payTunaiLoading=!1,Y.$apply()}})}function Q(){Y.transactionLoading=!0,$.ajax({context:b,type:"POST",url:ca+"date_update/",dataType:"json",data:{transaction_date:Y.transaction.transaction_date},success:function(a){Y.transactionLoading=!1,a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),Y.$apply()},complete:function(){Y.transactionLoading=!1,Y.$apply()},error:function(){Y.transactionLoading=!1,Y.$apply()}})}function R(){Y.transactionOkLoading=!0,$.ajax({context:b,type:"GET",url:ea+"transaction_rbuy_ok_list/",dataType:"json",data:{last_count:Y.transactionOkArray.length},success:function(a){Y.transactionOkLoading=!1,a.transactions&&(a.transactions.forEach(function(a){if(Y.transactionOkArray.length){var b=_.findIndex(Y.transactionOkArray,function(b){return b.transaction_uxid==a.transaction_uxid});-1===b?Y.transactionOkArray.push(a):Y.transactionOkArray[b]=a}else Y.transactionOkArray.push(a)}),T()),Y.transactionOkArray.length?Y.transactionOkEmpty=!1:Y.transactionOkEmpty=!0,Y.$apply()},complete:function(){Y.transactionOkLoading=!1,Y.$apply()},error:function(){Y.transactionOkLoading=!1,Y.$apply()}})}function S(){Y.transactionOkLoading=!0,$.ajax({context:b,type:"GET",url:ea+"transaction_rbuy_ok_search/",dataType:"json",data:{last_count:Y.transactionOkArray.length,search:Y.transactionOkSearchTx},success:function(a){Y.transactionOkLoading=!1,a.transactions&&(a.transactions.forEach(function(a){if(Y.transactionOkArray.length){var b=_.findIndex(Y.transactionOkArray,function(b){return b.transaction_uxid==a.transaction_uxid});-1===b?Y.transactionOkArray.push(a):Y.transactionOkArray[b]=a}else Y.transactionOkArray.push(a)}),T()),Y.transactionOkArray.length?Y.transactionOkEmpty=!1:Y.transactionOkEmpty=!0,Y.$apply()},complete:function(){Y.transactionOkLoading=!1,Y.$apply()},error:function(){Y.transactionOkLoading=!1,Y.$apply()}})}function T(){Y.transactionOkObjSelect||Y.transactionOkArray.length&&W(Y.transactionOkArray[0])}function U(){Y.transactionOkEmpty=!1,Y.transactionOkSearchTx.length?(Y.transactionOkArray=[],S()):(Y.transactionOkArray=[],R())}function V(){Y.transactionOkEmpty=!1,Y.transactionOkSearchTx.length?S():R()}function W(a){angular.forEach(Y.transactionOkArray,function(a){a.selected=!1}),Y.transactionOkObjSelect=a,Y.transactionOkObjSelect.selected=!0}function X(){Y.transactionFinishConfirm=!0}var Y=b;Y.loadComplete=!1,Y.windowHeight=function(){var a=$(window).height(),b=a/4,c=a-b;return c-80},Y.formatNumber=e,Y.toRealNumber=f,Y.removeZeroDecimal=g;var Z=a.api.url_product,aa=a.api.url_product_image_host;Y.api_url_product_image_host=aa,Y.productSelectForm=!1,Y.productSelectFormOpen=function(){Y.productSelectForm=!0,l()},Y.categoryLoading=!1,Y.categorys=[],i(),Y.categoryListMore=function(){i()},Y.categoryNameSelected="",Y.categorySelect=j,Y.categoryClearSelect=k,b.$watch("categoryNameSelected",function(a,b){(void 0!==a||null!==a)&&a!==b&&l()},!0),Y.productListLoad=l,Y.productListMoreCall=function(){m()},Y.productLoading=!1,Y.products=[],Y.productList=n,Y.productSearch="",Y.productSelect=r;var ba=a.api.url_supplier;Y.supplierSelectForm=!1,Y.supplierSelectFormOpen=function(){Y.supplierSelectForm=!0,w()},Y.supplierEmpty=!1,Y.supplierLoading=!1,Y.suppliers=[],Y.supplierSearch="",Y.supplierListLoad=w,Y.supplierListMoreCall=function(){x()},Y.supplierSelect=y,Y.supplierSetSave=z,Y.supplierClearSave=A,Y.supplierObjNew={supplier_uxid:"",supplier_realname:"",supplier_code:"",supplier_email:"",supplier_company:"",supplier_phone:"",supplier_address1:"",supplier_address2:"",supplier_address3:"",supplier_address4:"",supplier_address5:""},Y.supplierFormNew=!1,Y.supplierCreate=B,Y.supplierCreateLoading=!1,Y.supplierCreateSave=C,Y.supplierObjEdit={supplier_uxid:"",supplier_realname:"",supplier_code:"",supplier_email:"",supplier_company:"",supplier_phone:"",supplier_address1:"",supplier_address2:"",supplier_address3:"",supplier_address4:"",supplier_address5:""},Y.supplierFormEdit=!1,Y.supplierEdit=D,Y.supplierEditLoading=!1,Y.supplierEditSave=E;var ca=a.api.url_transaction_rbuy;Y.transaction={transaction_uxid:"",transaction_number:"",transaction_draft_name:"",transaction_operator_uxid:"",transaction_operator_username:"",transaction_supplier_uxid:"",transaction_supplier_realname:"",transaction_supplier_code:"",transaction_supplier_email:"",transaction_supplier_company:"",transaction_supplier_phone:"",transaction_supplier_address1:"",transaction_supplier_address2:"",transaction_supplier_address3:"",transaction_supplier_address4:"",transaction_supplier_address5:"",transaction_supplier_uxid:"",transaction_supplier_realname:"",transaction_supplier_code:"",transaction_supplier_email:"",transaction_supplier_company:"",transaction_supplier_phone:"",transaction_supplier_address1:"",transaction_supplier_address2:"",transaction_supplier_address3:"",transaction_supplier_address4:"",transaction_supplier_address5:"",transaction_shipping_realname:"",transaction_shipping_code:"",transaction_shipping_email:"",transaction_shipping_company:"",transaction_shipping_phone:"",transaction_shipping_address1:"",transaction_shipping_address2:"",transaction_shipping_address3:"",transaction_shipping_address4:"",transaction_shipping_address5:"",transaction_shipping_cost:"",transaction_value:"",transaction_weight:"",transaction_tax_percent:"",transaction_tax_value:"",transaction_total:"",transaction_cash_pay:"",transaction_cash_back:"",transaction_day:"",transaction_month:"",transaction_year:"",transaction_timestamp:"",transaction_terms:"",transaction_note:"",transaction_status:"",transaction_discount_value:"",transaction_discount_price:"",transaction_date:""},b.$watch("transaction",function(a,b){(void 0!==a||null!==a)&&Y.transaction.transaction_uxid.length>1&&(Y.loadComplete=!0)},!0),Y.transactionLoading=!1,Y.carts=[],Y.transactionOpen=G,Y.cartAddProduct=I,Y.barcodeTx="",Y.cartAddBarcode=J,Y.cartEditObj={cart_uxid:"",cart_product_name:"",cart_product_code:"",cart_product_unit:"",cart_product_base_price:"",cart_amount:"",cart_base_value:"",cart_note:""},Y.cartEditForm=!1,Y.cartEdit=K,b.$watch("cartEditObj.cart_product_base_price",function(a,b){if(void 0!==a&&null!==a){var c=f(Y.cartEditObj.cart_amount),d=f(a);if(c>0&&d>0){var g=f(Y.cartEditObj.cart_product_base_price)*f(Y.cartEditObj.cart_amount);Y.cartEditObj.cart_base_value=e(g)}}},!0),b.$watch("cartEditObj.cart_amount",function(a,b){if(void 0!==a&&null!==a){var c=f(Y.cartEditObj.cart_amount),d=f(Y.cartEditObj.cart_product_base_price);if(c>0&&d>0){var g=f(Y.cartEditObj.cart_product_base_price)*f(Y.cartEditObj.cart_amount);Y.cartEditObj.cart_base_value=e(g)}}},!0),b.$watch("cartEditObj.cart_base_value",function(a,b){if(void 0!==a&&null!==a){var c=f(Y.cartEditObj.cart_amount),d=f(a);if(c>0&&d>0){var g=f(Y.cartEditObj.cart_base_value)/f(Y.cartEditObj.cart_amount);Y.cartEditObj.cart_product_base_price=e(g)}}},!0),$("#txBarcode").focus(),Y.cartEditLoading=!1,Y.cartEditSave=L,Y.cartObjDelete={cart_uxid:"",cart_product_name:""},Y.cartDeleteConfirm=!1,Y.cartDelete=M,Y.cartDeleteLoading=!1,Y.cartDeleteYes=N;var da=a.api.url_cashflow;Y.payTunaiObj={cash_date_start:"",cash_total:"",cash_pay:"",cash_cashbox_uxid:"",cash_cashbox_name:""},Y.payTunaiForm=!1,Y.cashboxs=[],Y.payTunai=O,Y.payTunaiLoading=!1,Y.payTunaiSave=P,Y.dateSave=Q,b.$watch("transaction.transaction_date",function(a,b){if((void 0!==a||null!==a)&&b.length){var c=b.replace(" ","-");c!=a&&(console.log(a),a.indexOf("-")>=0&&Q())}},!0);var ea=a.api.url_transaction;Y.transactionOkForm=!1,Y.transactionOkFormOpen=function(){Y.transactionOkForm=!0,U()},Y.transactionOkEmpty=!1,Y.transactionOkLoading=!1,Y.transactionOkArray=[],Y.transactionOkList=R,Y.transactionOkSearchTx="",Y.transactionOkListLoad=U,Y.transactionOkListMoreCall=function(){V()},Y.transactionOkObjSelect=!1,Y.transactionOkSelect=W,Y.transactionCancelConfirm=!1,Y.transactionCancel=function(){Y.transactionCancelConfirm=!0},Y.transactionCloseConfirm=!1,Y.transactionClose=function(){Y.transactionCloseConfirm=!0},Y.transactionCloseLoading=!1,Y.transactionCloseYes=function(){Y.transactionCloseLoading=!0,$.ajax({context:b,type:"GET",url:ca+"transaction_close/",dataType:"json",success:function(a){Y.transactionCancelConfirm=!1,Y.transactionCloseConfirm=!1,Y.transactionFinishConfirm=!1,Y.transactionCloseLoading=!1,Y.carts=[],a.transaction&&(Y.transaction=a.transaction),a.carts&&(Y.carts=a.carts),d.go("app.rbuy"),Y.$apply()},complete:function(){Y.transactionCancelConfirm=!1,Y.transactionCloseConfirm=!1,Y.transactionFinishConfirm=!1,Y.transactionCloseLoading=!1,Y.$apply()},error:function(){Y.transactionCancelConfirm=!1,Y.transactionCloseConfirm=!1,Y.transactionFinishConfirm=!1,Y.transactionCloseLoading=!1,Y.$apply()}})},Y.transactionObjDelete={transaction_uxid:"",transaction_number:""},Y.transactionDeleteConfirm=!1,Y.transactionDelete=function(a){Y.transactionDeleteConfirm=!0,Y.transactionObjDelete.transaction_uxid=a.transaction_uxid,Y.transactionObjDelete.transaction_number=a.transaction_number},Y.transactionDeleteLoading=!1,Y.transactionDeleteYes=function(){Y.transactionDeleteLoading=!0,$.ajax({context:b,type:"GET",url:ca+"transaction_delete/",dataType:"json",data:Y.transactionObjDelete,success:function(a){Y.transactionDeleteLoading=!1,a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message),Y.$apply()),a.status&&"OK"==a.status&&(Y.transactionDeleteConfirm=!1,Y.transactionOkObjSelect=!1,Y.transactionOkArray=_.without(Y.transactionOkArray,_.findWhere(Y.transactionOkArray,{transaction_uxid:Y.transactionObjDelete.transaction_uxid})),T()),Y.$apply()},complete:function(){Y.transactionDeleteLoading=!1,Y.$apply()},error:function(){Y.transactionDeleteLoading=!1,Y.$apply()}})},Y.transactionFinishConfirm=!1,Y.transactionFinishOpen=X,d.params.uxid?H(d.params.uxid):F(),Y.transactionPrintBT=function(a){return a.transaction_total<=0?void c.pop("info","Info","Belum ada daftar belanja"):void $.ajax({context:b,type:"GET",url:"/print/transaction/",dataType:"json",data:{transaction_uxid:a.transaction_uxid},success:function(a){a.message&&(a.status?"OK"==a.status?c.pop("success","Info",a.message):c.pop("error","Error",a.message):c.pop("info","Message",a.message)),Y.$apply()},complete:function(){},error:function(){}})},Y.printDiv=function(a){if(Y.transaction.transaction_total<=0)return void c.pop("info","Info","Belum ada daftar belanja");var b=document.getElementById(a).innerHTML;document.body.innerHTML;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var d=window.open("","_blank","width=600,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");d.window.focus(),d.document.write('<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="www/assets/styles/nota.css" /></head><body onload="window.print()"><div class="reward-body">'+b+"</div></html>"),d.onbeforeunload=function(a){return d.close(),".\n"},d.onabort=function(a){d.document.close(),d.close()}}else{var d=window.open("","_blank","width=800,height=600");d.document.open(),d.document.write('<html><head><link rel="stylesheet" type="text/css" href="www/assets/styles/nota.css" /></head><body onload="window.print()">'+b+"</html>"),d.document.close()}return!0}}angular.module("app",["datetimepicker"]).controller("RbuyCtrl",a),a.$inject=["$rootScope","$scope","toaster","$state"]}();