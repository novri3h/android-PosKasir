!function(){"use strict";function a(a,b,c,d,e){function f(a){var b="0";a+="",a=a.replace(new RegExp(" ","g"),"");var c=a.split(".");if(c.length>1){var d=c[0].replace(new RegExp(",","g"),""),e=c[1].replace(new RegExp(",","g"),"");b=parseInt(e)?d+"."+e:d}else b=a.replace(new RegExp(",","g"),"");return b.length<1&&(b="0"),b}function g(){m.reportLoading=!0,m.chartSellReload=!1,$.ajax({context:b,type:"GET",url:o+"report_welcome/",dataType:"json",success:function(a){h(a)},complete:function(){m.reportLoading=!1,m.$apply()},error:function(){m.reportLoading=!1,m.$apply()}})}function h(a){var b=[],c=[],d=[];a.report_sell_chart_points&&(b=a.report_sell_chart_points,angular.forEach(a.report_sell_chart_points,function(a){var b=[a[0],a[0]];d.push(b);var e=[a[0],"0"];c.push(e)})),a.report_rsell_chart_points&&angular.forEach(a.report_rsell_chart_points,function(a){var e=[a[0],a[0]],f=_.findIndex(m.chart_ticks,function(a){return a[0]==e[0]});-1===f?d.push(e):d[f]=e;var g=[a[0],a[1]],h=_.findIndex(c,function(a){return a[0]==g[0]});if(-1===h){c.push(g);var i=[a[0],"0"];b.push(i)}else c[h]=g}),b.length&&c.length&&d.length?(m.chart_month.report_sell_chart_points=b,m.chart_month.report_rsell_chart_points=c,m.chart_month.ticks=d):(m.chart_month.report_sell_chart_points=[["01","0"]],m.chart_month.report_rsell_chart_points=[["01","0"]],m.chart_month.ticks=[["01","01"]]),m.chartSellReload=!0,a.report_operator_cashflows&&(m.report_operator_cashflows=a.report_operator_cashflows),m.$apply()}function i(){var a=_.findWhere(m.optionCategorys,{id:l.login_detail.login_store_category});_.size(a)?m.optionCategorySelected=a:m.optionCategorySelected=m.optionCategorys[0],m.accountEditObj.account_store_owner=l.login_detail.login_store_owner,m.accountEditObj.account_store_name=l.login_detail.login_store_name,m.accountEditObj.account_store_company=l.login_detail.login_store_company,m.accountEditObj.account_store_phone=l.login_detail.login_store_phone,m.accountEditObj.account_store_address=l.login_detail.login_store_address,m.accountEditObj.account_store_address1=l.login_detail.login_store_address1,m.accountEditObj.account_store_address2=l.login_detail.login_store_address2,m.accountEditObj.account_store_address3=l.login_detail.login_store_address3,m.accountEditObj.account_store_address4=l.login_detail.login_store_address4,m.accountEditObj.account_store_address5=l.login_detail.login_store_address5,m.accountEditObj.account_store_markup=l.login_detail.login_store_markup,m.accountEditObj.account_store_stock_alert=l.login_detail.login_store_stock_alert,m.accountEditObj.account_store_info=l.login_detail.login_store_info,m.accountEditObj.account_store_footnote=l.login_detail.login_store_footnote,m.accountEditForm=!0}function j(){m.accountEditObj.account_store_markup=f(m.accountEditObj.account_store_markup),m.accountEditObj.account_store_stock_alert=f(m.accountEditObj.account_store_stock_alert),m.accountEditObj.account_store_category=m.optionCategorySelected.id,m.accountEditLoading=!0,$.ajax({context:b,type:"POST",url:n+"account_update/",dataType:"json",data:m.accountEditObj,success:function(a){a.message&&(a.status?"OK"==a.status?e.pop("success","Info",a.message):e.pop("error","Error",a.message):e.pop("info","Message",a.message),m.$apply()),a.login_detail&&(l.login_detail=a.login_detail),a.status&&"OK"==a.status&&(m.accountEditForm=!1),m.$apply()},complete:function(){m.accountEditLoading=!1,m.$apply()},error:function(){m.accountEditLoading=!1,m.$apply()}})}function k(){m.changePasswordLoading=!0,$.ajax({context:b,type:"POST",url:n+"account_update_password/",dataType:"json",data:m.changePasswordObj,success:function(a){a.message&&(a.status?"OK"==a.status?e.pop("success","Info",a.message):e.pop("error","Error",a.message):e.pop("info","Message",a.message),m.$apply()),a.status&&"OK"==a.status&&(m.changePasswordForm=!1,m.$apply())},complete:function(){m.changePasswordLoading=!1,m.$apply()},error:function(){m.changePasswordLoading=!1,m.$apply()}})}var l=a,m=b,n=a.api.url_account,o=(a.api.url_account_image_host,a.api.url_report);m.chart_month={report_sell_chart_points:[],report_rsell_chart_points:[],ticks:[]},angular.isDefined(c.chart_month)?m.chart_month=c.chart_month:c.chart_month=m.chart_month,b.$watch("chart_month",function(){c.chart_month=m.chart_month},!0),m.chartSellReload=!1,m.reportLoading=!1,m.report_operator_cashflows=[],g(),m.optionCategorys=[{id:"TOKO",name:"TOKO"},{id:"WARUNG",name:"WARUNG"},{id:"BENGKEL",name:"BENGKEL"},{id:"APOTIK",name:"APOTIK"},{id:"RESTORAN",name:"RESTORAN"},{id:"CAFE",name:"CAFE"},{id:"WARALABA",name:"WARALABA"},{id:"ONLINESHOP",name:"ONLINESHOP"},{id:"KONTER",name:"KONTER"},{id:"FURNITUR",name:"FURNITUR"},{id:"TOKO HANDPHONE",name:"TOKO HANDPHONE"},{id:"TOKO BANGUNAN",name:"TOKO BANGUNAN"},{id:"TOKO LISTRIK",name:"TOKO LISTRIK"},{id:"TOKO ATK",name:"TOKO ATK"},{id:"TOKO BUAH",name:"TOKO BUAH"},{id:"TOKO FASHION",name:"TOKO FASHION"},{id:"TOKO KOSMETIK",name:"TOKO KOSMETIK"},{id:"TOKO PERTANIAN",name:"TOKO PERTANIAN"}],m.optionCategorySelected=m.optionCategorys[0],m.accountEditObj={account_store_owner:"",account_store_name:"",account_store_category:"",account_store_company:"",account_store_phone:"",account_store_address:"",account_store_address1:"",account_store_address2:"",account_store_address3:"",account_store_address4:"",account_store_address5:"",account_store_markup:"",account_store_stock_alert:"",account_store_info:"",account_store_footnote:""},m.accountEditForm=!1,m.accountEdit=i,m.accountEditLoading=!1,m.accountEditSave=j,m.changePasswordObj={password_old:"",password_new:""},m.changePasswordForm=!1,m.changePassword=function(){m.changePasswordObj.password_old="",m.changePasswordObj.password_new="",m.changePasswordForm=!0},m.changePasswordLoading=!1,m.changePasswordSave=k}angular.module("app",["ngImgCrop","datetimepicker"]).controller("WelcomeCtrl",a),a.$inject=["$rootScope","$scope","$localStorage","$state","toaster"]}();